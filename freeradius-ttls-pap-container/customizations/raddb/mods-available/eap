# Based on https://wiki.freeradius.org/guide/eduroam
# Modified to only use EAP-TTLS

eap {
        # The initial EAP type requested.
        default_eap_type = ttls

        # The maximum time an EAP-Session can continue for
        timer_expire = 60

        # The maximum number of ongoing EAP sessions
        max_sessions = ${max_requests}

        tls-config tls-common {
                certificate_file = ${certdir}/server.pem
                private_key_file = ${certdir}/server.key
                private_key_password = whatever # we didn't set one, intentionally
                ca_file = ${cadir}/ca.pem
                tls_min_version = "1.2"
                tls_max_version = "1.3"

                # If your AP drops packets towards the client, try reducing this.
                fragment_size = 1024
        }

        ttls {
                tls = tls-common
                default_eap_type = pap
                virtual_server = "eduroam-inner"
        }
}
